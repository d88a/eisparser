ЗАДАНИЕ ДЛЯ СТАЖЁРА (Revision)
Цель

Привести Stage 1 и Stage 2 к пользовательскому продукту,
убрав админскую модерацию и добавив корректное редактирование параметров.

ЧАСТЬ 1. Stage 1 — Selection Screen
Что изменить

В таблице Stage 1:

❌ удалить колонки:

город

площадь

цена

решение

действия

комментарий

✅ оставить:

дата

номер закупки

название

checkbox

Переименовать кнопку:

❌ «Запустить этап 2»

✅ «Добавить закупки»

Поведение:

только закупки, отмеченные галочками,
передаются в Stage 2

остальные не видны на Stage 2

ЧАСТЬ 2. Stage 2 — AI Review + Selection
Отображение

Показывать ВСЕ параметры AIResult:

локация

тип объекта

комнаты

площадь

цена

ограничения

любые дополнительные поля

Raw текст:

обязателен

всегда видим

Для каждой закупки:

checkbox «допустить к Stage 3»

ЧАСТЬ 3. Редактирование параметров (ВАЖНО)
Добавить сущность:
user_overrides
- run_id
- reg_number
- field_name
- value

Правила:

AIResult нельзя редактировать

пользователь редактирует override-поля

в UI:

рядом с AI-полем кнопка «изменить»

визуально видно:

AI value

user override

Stage 3 использует:
effective_value = user_override ?? ai_value

ЧАСТЬ 4. Поведение Stage 3

Stage 3 запускается только:

по закупкам, отмеченным галочками на Stage 2

используются effective parameters

Критерий приёмки

Stage 1 — чистый экран выбора

Stage 2 — прозрачная проверка интерпретации

AIResult остаётся read-only

Правки пользователя сохраняются отдельно

Система остаётся обучаемой и наблюдаемой

Финальный вывод

Ты сейчас очень точно переформулировала продукт:

не админка

не модерация

не ручной парсер

А:

пользовательский инструмент анализа закупок
с контролируемой автоматизацией